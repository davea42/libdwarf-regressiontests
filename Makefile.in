# Makefile which builds builds the code to test and
# runs the executables.
# Running these tests multiple times simultaneously
# in a single directory will result in incorrect results and errors.

all:  pretest build testonly

test: pretest build testonly

build: pretest
	sh ./PICKUPBIN

testonly:
	sh ./RUNALL.sh
pretest:
	sh CHECKIFRUNNING.sh

# RUNALL.sh does this
dd:
	./DWARFTEST.sh dd 2>ALLdd 1>&2

clean:
	sh ./CLEANUP

distclean: clean
	rm -f Makefile
	rm -f config.h
	rm -f config.status
	rm -f config.status
	rm -f config.log
	rm -fr autom4te.cache
	rm -f dwarfdump.O
	rm -f dwarfdump2.O
